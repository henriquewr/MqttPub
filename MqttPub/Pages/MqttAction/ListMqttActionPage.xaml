<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/maui/global"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MqttPub.Pages.MqttAction.ListMqttActionPage"
             xmlns:viewmodel="clr-namespace:MqttPub.ViewModels.MqttActionModels.List"
             x:DataType="viewmodel:ListMqttActionViewModel"
             Title="List Mqtt Action Page">
    <VerticalStackLayout Padding="20">

        <Button Text="Create MQTT action"
                Command="{Binding CreateMqttActionCommand}"
                Margin="0,20,0,0"
                HorizontalOptions="End"/>

        <CollectionView ItemsSource="{Binding MqttActions}">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="viewmodel:ListMqttActionItemViewModel">
                    <Grid Padding="0,5">
                        <Border>
                            <Grid ColumnDefinitions="*, Auto" Padding="10">
                                <Label VerticalOptions="Center" Text="{Binding DisplayName}" FontSize="16" />
                                <Button Grid.Column="1"
                                        VerticalOptions="Center" 
                                        Text="Edit"
                                        Command="{Binding EditMqttActionCommand, Source={RelativeSource AncestorType={x:Type viewmodel:ListMqttActionViewModel}}}" 
                                        CommandParameter="{Binding .}">
                                </Button>
                            </Grid>
                        </Border>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </VerticalStackLayout>
</ContentPage>